{"version":3,"file":"transactionEvent.js","sources":["../../../src/utils/transactionEvent.ts"],"sourcesContent":["import { SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME, SEMANTIC_ATTRIBUTE_PROFILE_ID } from '../semanticAttributes';\nimport type { SpanJSON, TransactionEvent } from '../types-hoist';\nimport { dropUndefinedKeys } from '../utils-hoist';\n\n/**\n * Converts a transaction event to a span JSON object.\n */\nexport function convertTransactionEventToSpanJson(event: TransactionEvent): SpanJSON {\n  const { trace_id, parent_span_id, span_id, status, origin, data, op } = event.contexts?.trace ?? {};\n\n  return dropUndefinedKeys({\n    data: data ?? {},\n    description: event.transaction,\n    op,\n    parent_span_id,\n    span_id: span_id ?? '',\n    start_timestamp: event.start_timestamp ?? 0,\n    status,\n    timestamp: event.timestamp,\n    trace_id: trace_id ?? '',\n    origin,\n    profile_id: data?.[SEMANTIC_ATTRIBUTE_PROFILE_ID] as string | undefined,\n    exclusive_time: data?.[SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME] as number | undefined,\n    measurements: event.measurements,\n    is_segment: true,\n  });\n}\n\n/**\n * Converts a span JSON object to a transaction event.\n */\nexport function convertSpanJsonToTransactionEvent(span: SpanJSON): TransactionEvent {\n  const event: TransactionEvent = {\n    type: 'transaction',\n    timestamp: span.timestamp,\n    start_timestamp: span.start_timestamp,\n    transaction: span.description,\n    contexts: {\n      trace: {\n        trace_id: span.trace_id,\n        span_id: span.span_id,\n        parent_span_id: span.parent_span_id,\n        op: span.op,\n        status: span.status,\n        origin: span.origin,\n        data: {\n          ...span.data,\n          ...(span.profile_id && { [SEMANTIC_ATTRIBUTE_PROFILE_ID]: span.profile_id }),\n          ...(span.exclusive_time && { [SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]: span.exclusive_time }),\n        },\n      },\n    },\n    measurements: span.measurements,\n  };\n\n  return dropUndefinedKeys(event);\n}\n"],"names":["dropUndefinedKeys","SEMANTIC_ATTRIBUTE_PROFILE_ID","SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME"],"mappings":";;;;;;;;;AAIA;AACA;AACA;AACO,SAAS,iCAAiC,CAAC,KAAK,EAA8B;AACrF,EAAE,MAAM,EAAE,QAAQ,EAAE,cAAc,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAA,EAAK,GAAE,KAAK,CAAC,QAAQ,EAAE,KAAA,IAAS,EAAE;;AAErG,EAAE,OAAOA,wBAAiB,CAAC;AAC3B,IAAI,IAAI,EAAE,IAAK,IAAG,EAAE;AACpB,IAAI,WAAW,EAAE,KAAK,CAAC,WAAW;AAClC,IAAI,EAAE;AACN,IAAI,cAAc;AAClB,IAAI,OAAO,EAAE,OAAQ,IAAG,EAAE;AAC1B,IAAI,eAAe,EAAE,KAAK,CAAC,eAAA,IAAmB,CAAC;AAC/C,IAAI,MAAM;AACV,IAAI,SAAS,EAAE,KAAK,CAAC,SAAS;AAC9B,IAAI,QAAQ,EAAE,QAAS,IAAG,EAAE;AAC5B,IAAI,MAAM;AACV,IAAI,UAAU,EAAE,IAAI,GAAGC,gDAA6B,CAAE;AACtD,IAAI,cAAc,EAAE,IAAI,GAAGC,oDAAiC,CAAE;AAC9D,IAAI,YAAY,EAAE,KAAK,CAAC,YAAY;AACpC,IAAI,UAAU,EAAE,IAAI;AACpB,GAAG,CAAC;AACJ;;AAEA;AACA;AACA;AACO,SAAS,iCAAiC,CAAC,IAAI,EAA8B;AACpF,EAAE,MAAM,KAAK,GAAqB;AAClC,IAAI,IAAI,EAAE,aAAa;AACvB,IAAI,SAAS,EAAE,IAAI,CAAC,SAAS;AAC7B,IAAI,eAAe,EAAE,IAAI,CAAC,eAAe;AACzC,IAAI,WAAW,EAAE,IAAI,CAAC,WAAW;AACjC,IAAI,QAAQ,EAAE;AACd,MAAM,KAAK,EAAE;AACb,QAAQ,QAAQ,EAAE,IAAI,CAAC,QAAQ;AAC/B,QAAQ,OAAO,EAAE,IAAI,CAAC,OAAO;AAC7B,QAAQ,cAAc,EAAE,IAAI,CAAC,cAAc;AAC3C,QAAQ,EAAE,EAAE,IAAI,CAAC,EAAE;AACnB,QAAQ,MAAM,EAAE,IAAI,CAAC,MAAM;AAC3B,QAAQ,MAAM,EAAE,IAAI,CAAC,MAAM;AAC3B,QAAQ,IAAI,EAAE;AACd,UAAU,GAAG,IAAI,CAAC,IAAI;AACtB,UAAU,IAAI,IAAI,CAAC,cAAc,EAAE,CAACD,gDAA6B,GAAG,IAAI,CAAC,UAAA,EAAY,CAAC;AACtF,UAAU,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAACC,oDAAiC,GAAG,IAAI,CAAC,cAAA,EAAgB,CAAC;AAClG,SAAS;AACT,OAAO;AACP,KAAK;AACL,IAAI,YAAY,EAAE,IAAI,CAAC,YAAY;AACnC,GAAG;;AAEH,EAAE,OAAOF,wBAAiB,CAAC,KAAK,CAAC;AACjC;;;;;"}