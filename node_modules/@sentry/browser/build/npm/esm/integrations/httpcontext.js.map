{"version":3,"file":"httpcontext.js","sources":["../../../../src/integrations/httpcontext.ts"],"sourcesContent":["import { defineIntegration, getLocationHref } from '@sentry/core';\nimport { WINDOW } from '../helpers';\n\n/**\n * Collects information about HTTP request headers and\n * attaches them to the event.\n */\nexport const httpContextIntegration = defineIntegration(() => {\n  return {\n    name: 'HttpContext',\n    preprocessEvent(event) {\n      // if none of the information we want exists, don't bother\n      if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) {\n        return;\n      }\n\n      // grab as much info as exists and add it to the event\n      const url = event.request?.url || getLocationHref();\n      const { referrer } = WINDOW.document || {};\n      const { userAgent } = WINDOW.navigator || {};\n\n      const headers = {\n        ...event.request?.headers,\n        ...(referrer && { Referer: referrer }),\n        ...(userAgent && { 'User-Agent': userAgent }),\n      };\n      const request = {\n        ...event.request,\n        ...(url && { url }),\n        headers,\n      };\n\n      event.request = request;\n    },\n  };\n});\n"],"names":[],"mappings":";;;AAGA;AACA;AACA;AACA;MACa,sBAAuB,GAAE,iBAAiB,CAAC,MAAM;AAC9D,EAAE,OAAO;AACT,IAAI,IAAI,EAAE,aAAa;AACvB,IAAI,eAAe,CAAC,KAAK,EAAE;AAC3B;AACA,MAAM,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,EAAE;AACrE,QAAQ;AACR;;AAEA;AACA,MAAM,MAAM,GAAI,GAAE,KAAK,CAAC,OAAO,EAAE,GAAI,IAAG,eAAe,EAAE;AACzD,MAAM,MAAM,EAAE,QAAA,EAAW,GAAE,MAAM,CAAC,QAAA,IAAY,EAAE;AAChD,MAAM,MAAM,EAAE,SAAA,EAAY,GAAE,MAAM,CAAC,SAAA,IAAa,EAAE;;AAElD,MAAM,MAAM,UAAU;AACtB,QAAQ,GAAG,KAAK,CAAC,OAAO,EAAE,OAAO;AACjC,QAAQ,IAAI,QAAS,IAAG,EAAE,OAAO,EAAE,QAAS,EAAC,CAAC;AAC9C,QAAQ,IAAI,SAAU,IAAG,EAAE,YAAY,EAAE,SAAU,EAAC,CAAC;AACrD,OAAO;AACP,MAAM,MAAM,UAAU;AACtB,QAAQ,GAAG,KAAK,CAAC,OAAO;AACxB,QAAQ,IAAI,GAAA,IAAO,EAAE,GAAA,EAAK,CAAC;AAC3B,QAAQ,OAAO;AACf,OAAO;;AAEP,MAAM,KAAK,CAAC,OAAQ,GAAE,OAAO;AAC7B,KAAK;AACL,GAAG;AACH,CAAC;;;;"}